<!--pages/score_rank/index.wxml-->
<view class="content">
  <view class="avatar" id="avatar">
    <image class="touxiang" src="{{avatarUrl}}" />
    <image class="warnning" bindtap="showWarnning" src="/static/warning.png" />
  </view>
  <view class="rank" id="rank">
    <view class="left">
      <text>我的排名：{{rankData.mine_rank}}</text>
      <text>年度积分：{{rankData.annual_integral}}</text>
    </view>
    <view class="right">
      <text>我的家庭排名：{{rankData.family_rank}}</text>
      <text>兑换积分：{{rankData.integral}}</text>
    </view>
  </view>
  <view class="swiper-tab" id="swiper-tabs">
    <view class="['tabs',{{current === item.id ? 'active':''}}]" wx:for="{{tabs}}" wx:key="index" bindtap="switchRank" data-index="{{item.id}}">
      <text>{{item.title}}</text>
    </view>
  </view>
  <view class="swiper-content">
    <swiper current="{{current}}" style="height: calc(100vh - 20rpx - {{avatarHeight + rankHeight + swiperTabsHeight}}px);" bindchange="rankChange">
      <swiper-item>
        <view class="userinfo">
          <scroll-view scroll-y="{{true}}" class="scorll-view" style="height: calc(100vh - 50rpx - {{avatarHeight + rankHeight + swiperTabsHeight}}px);">
            <view class="user-box" wx:for="{{singleRank}}" wx:key="index">
              <view class="rank-left">
                <view class="rank-num">
                  <text>{{index+1}}</text>
                </view>
                <view class="rank-user">
                  <view class="rank-img">
                    <image src="{{item.avatarUrl}}" />
                  </view>
                  <view class="rank-name">
                    <text>{{item.nickName}}</text>
                  </view>
                </view>
              </view>
              <view class="rank-score">
                <text>{{item.integral}}积分</text>
              </view>
            </view>
            <view class="login-btn" bindtap="goMore" data-index="0" wx:if="{{singleRank.length===10}}">
              <image src="/static/login.png" />
              <view class="btn-in" bindtap="goMore" data-index="0"> <text>查看更多</text></view>
            </view>
          </scroll-view>
        </view>
      </swiper-item>
      <swiper-item>
        <view class="userinfo">
          <scroll-view scroll-y="{{true}}" class="scorll-view" style="height: calc(100vh - 50rpx - {{avatarHeight + rankHeight + swiperTabsHeight}}px);">
            <view class="user-box" wx:for="{{familyRank}}" wx:key="index">
              <view class="rank-left">
                <view class="rank-num">
                  <text>{{index+1}}</text>
                </view>
                <view class="rank-user">
                  <view class="rank-name">
                    <text>{{ item.create_name }}</text>
                  </view>
                </view>
              </view>
              <view class="rank-score">
                <text>{{item.integral}}积分</text>
              </view>
            </view>
            <view class="login-btn" wx:if="{{familyRank === 10}}" bindtap="goMore" data-index="1">
              <image src="/static/login.png" />
              <view class="btn-in"> <text>查看更多</text></view>
            </view>
          </scroll-view>
        </view>
      </swiper-item>
    </swiper>
  </view>
</view>